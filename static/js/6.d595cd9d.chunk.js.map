{"version":3,"sources":["core/utils/env.ts","hooks/useAxios.tsx","pages/authen/model/formLogin.ts","core/utils/axios.ts","pages/authen/service/authen-service.ts","pages/authen/component/FormLogin.tsx","pages/authen/index.tsx"],"names":["process","REACT_APP_BASE_URL_REST","REACT_APP_IS_MOCKUP","BASE_URL_REST","IS_MOCKUP","useAxios","serviceFn","axiosInstance","axios","create","baseURL","headers","Authorization","service","useCallback","UseService","then","result","err","catch","IFromLoginField","options","http","interceptors","response","use","errors","status","addHeader","Object","assign","defaults","removeHeader","forEach","header","httpClient","Axios","AuthService","signInWithUserNameAndPassword","input","a","AuthenticateOutputMock","token","FormLogin","dispatch","useDispatch","push","useHistory","onFinish","values","ErrorMsg","window","sessionStorage","setItem","ACCESS_TOKEN","setAuthenticate","SuccessMsg","initialValues","AuthenticateInputMock","Item","label","name","rules","required","message","Password","style","textAlign","type","htmlType","AuthenticatePages","span"],"mappings":"oHAAA,0EAAuDA,2OAAhDC,EAAP,EAAOA,wBAAyBC,EAAhC,EAAgCA,oBAEnBC,EAAgBF,EAChBG,EAAoC,SAAxBF,G,iCCHzB,0GAKe,SAASG,EAAYC,GAChC,IAEMC,EAAgBC,IAAMC,OAAO,CAC/BC,QAASP,IACTQ,QAAS,CACLC,cAAc,UAAD,OALH,UASlB,MAAO,CACHC,QAASC,uBAAY,kBAAMR,EAAUC,KAAgB,CAACA,EAAeD,KAItE,SAASS,EAAcF,GAC1B,OAAOA,IACFG,MAAK,SAACC,GAAD,MAAa,CAACC,IAAK,KAAMD,aAC9BE,OAAM,SAACD,GAAD,MAAsB,CAACA,MAAKD,OAAQ,S,gLClBtCG,EACC,WADDA,EAEC,W,oCC+BP,EA/BO,SAACC,GACX,IAAIC,EAAOd,IAAMC,OAAOY,GAYpB,OAAJC,QAAI,IAAJA,KAAMC,aAAaC,SAASC,KAVG,SAACD,GAAD,OAAmBA,KACrB,SAACE,GAClBA,EAAOC,UAiBnB,MAAO,CACHL,KAAM,CACFM,UATU,WAAmB,IAAlBjB,EAAiB,uDAAP,GACzBkB,OAAOC,OAAOR,EAAKS,SAASpB,QAASA,IASjCqB,aAPa,WAAmB,IAAlBrB,EAAiB,uDAAP,GAC5BA,EAAQsB,SAAQ,SAACC,GAAD,cAAmBZ,EAAKS,SAASG,QAQjDC,WAAYb,GAIcc,CAnCM,CACpC1B,QAASP,KAAiB,KAkChBmB,EAAP,EAAOA,KCLCe,GDKR,EAAaF,WC1BA,SAAC5B,GACjB,MAAO,CACH+B,8BAA8B,WAAD,4BAAE,WAAOC,GAAP,SAAAC,EAAA,0DACvBpC,IADuB,uBAEvBkB,EAAKM,UAAU,CAAChB,cAAc,UAAD,OAAY6B,IAAuBC,SAFzC,kBAGhBD,KAHgB,yCAWhBA,KAXgB,wHAAF,mDAAC,M,OCsDvBE,EAtD4B,WACvC,IAAO9B,EAAWR,aAAuB,SAACE,GAAD,OAAmB8B,EAAY9B,MAAjEM,QAED+B,EAAWC,cACVC,EAAQC,cAARD,KAEAR,EAAiCzB,IAAjCyB,8BAEDU,EAAQ,uCAAG,WAAOC,GAAP,iBAAAT,EAAA,+EAEmBzB,aAAW,kBAAMuB,EAA8BW,MAFlE,mBAEFhC,EAFE,EAEFA,QAFE,EAEMC,IAFN,uBAILgC,cAJK,0BAOTC,OAAOC,eAAeC,QAAQC,IAAcb,IAAuBC,OACnEE,EAASW,YAAgBtC,IACzB6B,EAAK,KACLU,YAAW,kBAVF,kDAYTN,cAZS,0DAAH,sDAgBd,OACI,eAAC,IAAD,CACIO,cAAeC,IACfV,SAAUA,EAFd,UAII,cAAC,IAAKW,KAAN,CACIC,MAAM,WACNC,KAAMzC,EACN0C,MAAO,CAAC,CAACC,UAAU,EAAMC,QAAS,gCAHtC,SAKI,cAAC,IAAD,MAGJ,cAAC,IAAKL,KAAN,CACIC,MAAM,WACNC,KAAMzC,EACN0C,MAAO,CAAC,CAACC,UAAU,EAAMC,QAAS,gCAHtC,SAKI,cAAC,IAAMC,SAAP,MAGJ,cAAC,IAAKN,KAAN,CAAWO,MAAO,CAACC,UAAW,UAA9B,SACI,cAAC,IAAD,CAAQC,KAAK,UAAUC,SAAS,SAAhC,0BCzCDC,UAdoC,WAC/C,OACI,mCACI,cAAC,IAAD,UACI,cAAC,IAAD,CAAKC,KAAM,GAAX,SACI,cAAC,IAAD,UACI,cAAC,EAAD","file":"static/js/6.d595cd9d.chunk.js","sourcesContent":["const {REACT_APP_BASE_URL_REST, REACT_APP_IS_MOCKUP} = process.env;\n\nexport const BASE_URL_REST = REACT_APP_BASE_URL_REST;\nexport const IS_MOCKUP = REACT_APP_IS_MOCKUP === \"true\";\n","import {useCallback} from \"react\";\nimport axios, {AxiosError, AxiosInstance} from \"axios\";\n\nimport {BASE_URL_REST} from \"core/utils/env\";\n\nexport default function useAxios<S>(serviceFn: (axiosInstance: AxiosInstance) => S) {\n    const mockToken = 'KKK'\n\n    const axiosInstance = axios.create({\n        baseURL: BASE_URL_REST,\n        headers: {\n            Authorization: `Bearer ${mockToken}`\n        }\n    }) as AxiosInstance\n\n    return {\n        service: useCallback(() => serviceFn(axiosInstance), [axiosInstance, serviceFn]) as () => S,\n    }\n}\n\nexport function UseService<S>(service: () => Promise<S>) {\n    return service()\n        .then((result) => ({err: null, result}))\n        .catch((err: AxiosError) => ({err, result: {} as S}))\n}\n\n","export interface IFromLogin {\n    userName: string\n    passWord: string\n}\n\nexport const IFromLoginField: IFromLogin = {\n    userName: \"userName\",\n    passWord: \"passWord\"\n}","import axios, {AxiosRequestConfig} from \"axios\";\nimport {BASE_URL_REST} from \"core/utils/env\";\n\nconst INIT_OPTION: AxiosRequestConfig = {\n    baseURL: BASE_URL_REST || \"\",\n}\n\nconst Axios = (options: AxiosRequestConfig) => {\n    let http = axios.create(options)\n\n    const handlerSuccessResponse = (response: any) => response;\n    const handlerErrorResponse = (errors: any) => {\n        switch (errors.status) {\n            case \"400\":\n                break;\n            default:\n                break;\n        }\n    };\n\n    http?.interceptors.response.use(handlerSuccessResponse, handlerErrorResponse);\n\n    const addHeader = (headers = {}) => {\n        Object.assign(http.defaults.headers, headers);\n    };\n    const removeHeader = (headers = []) => {\n        headers.forEach((header) => delete http.defaults[header]);\n    };\n\n    return {\n        http: {\n            addHeader,\n            removeHeader\n        },\n        httpClient: http\n    };\n};\n\nexport const {http, httpClient} = Axios(INIT_OPTION)\n","import {AxiosInstance} from \"axios\";\n\nimport {http} from \"core/utils/axios\";\nimport {IS_MOCKUP} from \"core/utils/env\";\n\nimport {AuthenticateOutput, AuthenticateInput} from \"../model/authen\";\nimport {AuthenticateOutputMock} from \"../mock/authen\";\n\nexport interface IServiceAuth {\n    signInWithUserNameAndPassword: (input: AuthenticateInput) => Promise<AuthenticateOutput>\n}\n\nconst AuthService = (axiosInstance: AxiosInstance): IServiceAuth => {\n    return {\n        signInWithUserNameAndPassword: async (input: AuthenticateInput): Promise<AuthenticateOutput> => {\n            if (IS_MOCKUP) {\n                http.addHeader({Authorization: `Bearer ${AuthenticateOutputMock.token}`})\n                return AuthenticateOutputMock\n            }\n            // return Promise.resolve(AuthenticateOutputMock)\n            try {\n                // const {status, data} = await axiosInstance.post('login', input)\n                // if (status !== 200) {\n                //     return {} as AuthenticateOutput\n                // }\n                return AuthenticateOutputMock\n            } catch (err) {\n                return err\n            }\n        },\n    }\n}\n\nexport default AuthService\n","import React from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport {useHistory} from \"react-router-dom\";\nimport {Form, Input, Button} from 'antd';\n\nimport {setAuthenticate} from \"store/app\";\nimport useAxios, {UseService} from \"hooks/useAxios\";\nimport {ErrorMsg, SuccessMsg} from \"component/common/ToastMessage\";\nimport {ACCESS_TOKEN} from \"core/utils/storage\";\n\nimport {IFromLoginField, IFromLogin} from \"../model/formLogin\";\nimport {AuthenticateInputMock, AuthenticateOutputMock} from \"../mock/authen\";\nimport AuthService, {IServiceAuth} from \"../service/authen-service\";\n\nconst FormLogin: React.FunctionComponent = (): React.ReactElement => {\n    const {service} = useAxios<IServiceAuth>((axiosInstance) => AuthService(axiosInstance))\n\n    const dispatch = useDispatch();\n    const {push} = useHistory()\n\n    const {signInWithUserNameAndPassword} = service()\n\n    const onFinish = async (values: IFromLogin) => {\n        try {\n            const {result, err} = await UseService(() => signInWithUserNameAndPassword(values))\n            if (err) {\n                ErrorMsg()\n                return\n            }\n            window.sessionStorage.setItem(ACCESS_TOKEN, AuthenticateOutputMock.token)\n            dispatch(setAuthenticate(result))\n            push(\"/\")\n            SuccessMsg('Login Success.')\n        } catch (err) {\n            ErrorMsg()\n        }\n    };\n\n    return (\n        <Form\n            initialValues={AuthenticateInputMock}\n            onFinish={onFinish}\n        >\n            <Form.Item\n                label=\"Username\"\n                name={IFromLoginField.userName}\n                rules={[{required: true, message: 'Please input your username!'}]}\n            >\n                <Input/>\n            </Form.Item>\n\n            <Form.Item\n                label=\"Password\"\n                name={IFromLoginField.passWord}\n                rules={[{required: true, message: 'Please input your password!'}]}\n            >\n                <Input.Password/>\n            </Form.Item>\n\n            <Form.Item style={{textAlign: \"center\"}}>\n                <Button type=\"primary\" htmlType=\"submit\">\n                    Submit\n                </Button>\n            </Form.Item>\n        </Form>\n    );\n};\n\nexport default FormLogin\n","import React from \"react\";\nimport {Row, Col, Card} from 'antd';\n\nimport FormLogin from \"./component/FormLogin\";\n\nconst AuthenticatePages: React.FunctionComponent = (): React.ReactElement => {\n    return (\n        <>\n            <Row>\n                <Col span={24}>\n                    <Card>\n                        <FormLogin/>\n                    </Card>\n                </Col>\n            </Row>\n        </>\n    );\n};\n\nexport default AuthenticatePages;\n\n"],"sourceRoot":""}